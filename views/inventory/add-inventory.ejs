<% if (title) { %>
    <h1><%= title %></h1>
<% } else {
      res.redirect('/')
    } %>

<!-- Send flash message -->
<%- messages() %>

<!-- Display validation errors while filtering out redundant "Invalid value" code-->
<% if (errors) { %>
    <% let filteredErrors = errors.array().filter(error => error.msg !== "Invalid value"); %>
    <% if (filteredErrors.length > 0) { %>
        <ul class="notice">
            <% filteredErrors.forEach(error => { %>
                <li><%= error.msg %></li>
            <% }); %>
        </ul>
    <% } %>
<% } %>

<!-- New inventory form -->
 <form action="/inv/add-inventory" id="add-inventory" method="post">
    <p>All fields are required</p>
    <label>Classification <%- classificationList %></label>
    <label>Make <input type="text" name="inv_make" title="Inventory Make" placeholder="Min of 3 characters" required value="<%= locals.inv_make %>"></label>
    <label>Model <input type="text" name="inv_model" title="Inventory model" placeholder="Min of 3 characters" required value="<%= locals.inv_model %>"></label>
    <label>Description <textarea name="inv_description" title="Inventory description"><%= locals.inv_description %></textarea></label>
    <label>Image path <input type="text" name="inv_image" title="Inventory image" required value="<%= locals.inv_image%>"></label>
    <label>Thumbnail Path<input type="text" name="inv_thumbnail" title="Inventory thumbnail" required value="<%= locals.inv_thumbnail%>"></label>
    <label>Price<input type="text" name="inv_price" title="Inventory price" placeholder="Decimal or integer" required pattern="^\d+$" value="<%= locals.inv_price%>"></label>
    <label>Year <input type="text" name="inv_year" title="Inventory year" placeholder="4-digit year" required pattern="\d{4}" value="<%= locals.inv_year %>"></label>
    <label>Miles <input type="text" name="inv_miles" title="Inventory miles" placeholder="Digits only" required pattern="^\d+$" value="<%= locals.inv_miles%>"></label>
    <label>Color <input type="text" name="inv_color" title="Inventory color" required value="<%= locals.inv_color%>"></label>
    <input type="submit" id="submit" value="Add inventory">
 </form>